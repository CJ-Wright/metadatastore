<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>metadataStore &mdash; metadataStore .1 documentation</title>
    
    <link rel="stylesheet" href="_static/pyramid.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="metadataStore .1 documentation" href="index.html" />
    <link rel="next" title="Library Reference" href="architecture.html" />
    <link rel="prev" title="Welcome to metadataStore’s documentation!" href="index.html" />
<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Neuton&amp;subset=latin" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Nobile:regular,italic,bold,bolditalic&amp;subset=latin" type="text/css" media="screen" charset="utf-8" />
<!--[if lte IE 6]>
<link rel="stylesheet" href="_static/ie6.css" type="text/css" media="screen" charset="utf-8" />
<![endif]-->

  </head>
  <body>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="architecture.html" title="Library Reference"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Welcome to metadataStore’s documentation!"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">metadataStore .1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <img alt="_images/black-and-white-dog-md.png" src="_images/black-and-white-dog-md.png" />
<div class="section" id="metadatastore">
<h1>metadataStore<a class="headerlink" href="#metadatastore" title="Permalink to this headline">¶</a></h1>
<div class="section" id="purpose">
<h2>Purpose<a class="headerlink" href="#purpose" title="Permalink to this headline">¶</a></h2>
<p>Advanced techniques for a new generation of hardware will drive higher data rates for experiments at NSLS2 beamlines.
The large data volumes and data acquisition rates require high-performance logging and storage systems.
A typical experiment involves not only the raw data from detectors, but also requires additional data from the beamline
such as experiment owner, beamline_id, energy, motor positions, wavelength, etc… To date, this information is largely
held separately  and manipulated individually. metadataStore is a service that is used in order to record this sort of
metadata in beamline experiments. It is designed and implemented  with the needs of various experiments in mind,
therefore it is flexible enough to satisfy the needs of different experimental setups.</p>
<p>metadataStore can be used independently or embedded with the dataBroker, which utilizes an integrated approach that
integrates different data resources and makes these data resources available for data analysis clients.</p>
</div>
<div class="section" id="technology">
<h2>Technology<a class="headerlink" href="#technology" title="Permalink to this headline">¶</a></h2>
<p>metadataStore backend database is mongoDb, a No-SQL database that was chosen due to its performance and flexibility.
Python(v 2.7) is chosen as language of implementation. mongoDb Python driver(pymongo) is used to perform database related
operations.</p>
</div>
<div class="section" id="downloading-installing">
<h2>Downloading/Installing<a class="headerlink" href="#downloading-installing" title="Permalink to this headline">¶</a></h2>
<div class="section" id="requirements">
<h3>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h3>
<p>Python(version 2.7.X), pymongo (version 2.6+), six, Distutils, Git</p>
</div>
<div class="section" id="installation">
<h3>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h3>
<p>If a MongoDb</p>
<div class="section" id="mongodb-installation">
<h4>MongoDb Installation<a class="headerlink" href="#mongodb-installation" title="Permalink to this headline">¶</a></h4>
<p><em>Step 1</em>:</p>
<div class="highlight-python"><div class="highlight"><pre>% sudo apt-key adv --keyserver keyserver.ubuntu.com --recv 7F0CEB10
</pre></div>
</div>
<p><em>Step 2</em>:</p>
<div class="highlight-python"><div class="highlight"><pre>% sudo apt-key adv --keyserver keyserver.ubuntu.com --recv 7F0CEB10
</pre></div>
</div>
<p><em>Step 3</em>:</p>
<div class="highlight-python"><div class="highlight"><pre>% sudo apt-get update
</pre></div>
</div>
<p><em>Step 4</em>:</p>
<div class="highlight-python"><div class="highlight"><pre>% sudo apt-get install -y mongodb-org
</pre></div>
</div>
<p><em>Step 5</em>:</p>
<div class="highlight-python"><div class="highlight"><pre>% sudo apt-get install -y mongodb-org=2.6.1 mongodb-org-server=2.6.1 mongodb-org-shell=2.6.1 mongodb-org-mongos=2.6.1mongodb-org-tools=2.6.1
</pre></div>
</div>
</div>
<div class="section" id="metadatastore-installation">
<h4>metadataStore Installation<a class="headerlink" href="#metadatastore-installation" title="Permalink to this headline">¶</a></h4>
<p><em>Step 1</em>:</p>
<p>metadataStore is available via git repository: <a class="reference external" href="https://github.com/arkilic/metadataStore">https://github.com/arkilic/metadataStore</a></p>
<p>Clone this repository:</p>
<div class="highlight-python"><div class="highlight"><pre>%git clone https://github.com/arkilic/metadataStore
</pre></div>
</div>
<p><em>Step 2</em>:</p>
<p>metadataStore includes a setup.py script. Distutils, building and installing a module distribution using the Distutils
is one simple command to run from a terminal:</p>
<div class="highlight-python"><div class="highlight"><pre>% python setup.py install
</pre></div>
</div>
<p>If user does not have sudo access to the machine and/or does not want to install this package for all users:</p>
<div class="highlight-python"><div class="highlight"><pre>% python setup.py install --user
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="getting-help">
<h2>Getting Help<a class="headerlink" href="#getting-help" title="Permalink to this headline">¶</a></h2>
<p>metadataStore can be embedded within other applications or used interactively. If used within IPython, &#8216;help&#8217; keyword provides information regarding routines:</p>
<div class="highlight-python"><div class="highlight"><pre>% from metadataStore.userapi.commands import search
% help(search)
% search(scan_id=None, owner=None, start_time=None, beamline_id=None, end_time=None, data=False, header_id=None, tags=None, num_header=50)
%
% Provides an easy way to search Header entries inserted in metadataStore
% Usage:
%   search(scan_id=s_id)
%   search(scan_id=s_id, owner=&#39;ark*&#39;)
%   search(scan_id=s_id, start_time=datetime.datetime(2014, 4, 5))
%   search(scan_id=s_id, start_time=datetime.datetime(2014, 4, 5), owner=&#39;arkilic&#39;)
%   search(scan_id=s_id, start_time=datetime.datetime(2014, 4, 5), owner=&#39;ark*&#39;)
%   search(scan_id=s_id, start_time=datetime.datetime(2014, 4, 5), owner=&#39;arkili.&#39;)
</pre></div>
</div>
</div>
<div class="section" id="schema">
<h2>Schema<a class="headerlink" href="#schema" title="Permalink to this headline">¶</a></h2>
<p>Explanation goes here!</p>
<p><em>Header Format</em>:</p>
<div class="highlight-python"><div class="highlight"><pre>%{&#39;status&#39;: &#39;In Progress&#39;,
% &#39;beamline_id&#39;: None,
% &#39;tags&#39;: [&#39;CSX_Experiment1&#39;, &#39;CSX_Experiment2&#39;],
% &#39;start_time&#39;: datetime.datetime(2014, 9, 16, 13, 7, 58, 299000),
% &#39;scan_id&#39;: 3315, &#39;custom&#39;: {},
% &#39;event_descriptors&#39;: {&#39;event_descriptor_0&#39;: {&#39;data_keys&#39;: [&#39;motor5&#39;, &#39;motor4&#39;, &#39;motor3&#39;, &#39;list_of_1k&#39;, &#39;motor1&#39;, &#39;motor2&#39;],
%                                              &#39;tag&#39;: &#39;experimental&#39;, &#39;descriptor_name&#39;: &#39;scan&#39;,
%                                              &#39;header_id&#39;: ObjectId(&#39;5418362efa44833ca9b08d08&#39;),
%                                              &#39;event_type_id&#39;: 12, &#39;_id&#39;: ObjectId(&#39;5418362efa44833ca9b08d0a&#39;),
%                                              &#39;events&#39;: {
%                                                         &#39;event_0&#39;: {&#39;descriptor_id&#39;: ObjectId(&#39;5418362efa44833ca9b08d0a&#39;),
%                                                                     &#39;description&#39;: None,
%                                                                     &#39;header_id&#39;: ObjectId(&#39;5418362efa44833ca9b08d08&#39;),
%                                                                     &#39;seq_no&#39;: 3,
%                                                                     &#39;owner&#39;: &#39;arkilic&#39;,
%                                                                     &#39;_id&#39;: ObjectId(&#39;5418362efa44833ca9b08d0c&#39;),
%                                                                     &#39;data&#39;: {u&#39;motor5&#39;: 36, u&#39;motor4&#39;: 71, u&#39;motor3&#39;: 55, u&#39;list_of_1k&#39;: [12.3, 34.5, 45.3], u&#39;motor1&#39;: 44, u&#39;motor2&#39;: 35}},
%                                                         &#39;event_1&#39;: {&#39;descriptor_id&#39;: ObjectId(&#39;5418362efa44833ca9b08d0a&#39;),
%                                                                     &#39;description&#39;: None,
%                                                                     &#39;header_id&#39;: ObjectId(&#39;5418362efa44833ca9b08d08&#39;),
%                                                                     &#39;seq_no&#39;: 1,
%                                                                     &#39;owner&#39;: u&#39;arkilic&#39;,
%                                                                     &#39;_id&#39;: ObjectId(&#39;5418362efa44833ca9b08d0b&#39;),
%                                                                     &#39;data&#39;: {}}}, u&#39;type_descriptor&#39;: {}}},
% &#39;end_time&#39;: datetime.datetime(2014, 9, 16, 13, 7, 58, 299000),
% &#39;owner&#39;: u&#39;arkilic&#39;,
% &#39;configs&#39;: {&#39;config_0&#39;: {&#39;header_id&#39;: ObjectId(&#39;5418362efa44833ca9b08d08&#39;),
%                          &#39;_id&#39;: ObjectId(&#39;5418362efa44833ca9b08d09&#39;),
%                          &#39;config_params&#39;: {}}},
%                          &#39;_id&#39;: ObjectId(&#39;5418362efa44833ca9b08d08&#39;),
% &#39;header_versions&#39;: []}
</pre></div>
</div>
</div>
<div class="section" id="tutorial">
<h2>Tutorial<a class="headerlink" href="#tutorial" title="Permalink to this headline">¶</a></h2>
<p>Start here for a quick overview</p>
</div>
<div class="section" id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<p>Examples of how to perform specific tasks</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">metadataStore</a><ul>
<li><a class="reference internal" href="#purpose">Purpose</a></li>
<li><a class="reference internal" href="#technology">Technology</a></li>
<li><a class="reference internal" href="#downloading-installing">Downloading/Installing</a><ul>
<li><a class="reference internal" href="#requirements">Requirements</a></li>
<li><a class="reference internal" href="#installation">Installation</a><ul>
<li><a class="reference internal" href="#mongodb-installation">MongoDb Installation</a></li>
<li><a class="reference internal" href="#metadatastore-installation">metadataStore Installation</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#getting-help">Getting Help</a></li>
<li><a class="reference internal" href="#schema">Schema</a></li>
<li><a class="reference internal" href="#tutorial">Tutorial</a></li>
<li><a class="reference internal" href="#examples">Examples</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">Welcome to metadataStore&#8217;s documentation!</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="architecture.html"
                        title="next chapter">Library Reference</a></p>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="architecture.html" title="Library Reference"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Welcome to metadataStore’s documentation!"
             >previous</a> |</li>
        <li><a href="index.html">metadataStore .1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, Arman Arkilic.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.3.
    </div>
  </body>
</html>